package com.bzkj.handle;import com.bzkj.exception.CommonBizException;import com.bzkj.exception.ExpCodeEnum;import com.bzkj.rsp.Response;import com.bzkj.rsp.Result;import com.bzkj.rsp.ResultEnum;import org.apache.commons.lang3.StringUtils;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.http.HttpStatus;import org.springframework.validation.BindException;import org.springframework.web.HttpRequestMethodNotSupportedException;import org.springframework.web.bind.annotation.ControllerAdvice;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.bind.annotation.ResponseStatus;/** * @description: REST接口的通用异常处理 * @author: jensen * @date: created by 2019/9/11 16:31 */@ControllerAdvice@ResponseBodypublic class ExceptionHandle {    private static final Logger logger = LoggerFactory.getLogger("controllerLogger");    /**     * 业务异常处理     *     * @param exception     * @param <T>     * @return     */    @ExceptionHandler(CommonBizException.class)    public <T> Result<T> exceptionHandler(CommonBizException exception) {        return Result.newFailureResult(exception);    }    /**     * 请求方法不正确     *     * @param exception     * @return     */    @ExceptionHandler(HttpRequestMethodNotSupportedException.class)    public Result HttpRequestMethodNotSupportedException(HttpRequestMethodNotSupportedException exception) {        throw new CommonBizException(ExpCodeEnum.HTTP_REQ_METHOD_ERROR);    }    /**     * BindingResult参数校验     *     * @param e     * @return     */    @ResponseStatus(HttpStatus.OK)    @ExceptionHandler(BindException.class)    public Response handleBindException(BindException e) {        String bindingResultError = e.getBindingResult().getFieldError().getDefaultMessage();        String errorMessage = StringUtils.isEmpty(bindingResultError) ? ResultEnum.ERROR.getMessage() : bindingResultError;        return Response.error(errorMessage);    }    /**     * 系统异常处理     *     * @param exception     * @return     */    @ExceptionHandler(Exception.class)    public <T> Result<T> sysExpHandler(Exception exception) {        logger.error("系统异常 ", exception);        return Result.newFailureResult();    }}